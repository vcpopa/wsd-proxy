## Prerequisites
Before proceeding, ensure you have the following installed:

- **Python**: Version 3.x
- **Docker**: Ensure Docker is installed and running on your system.
- **Make**: Ensure Make utility is installed on your system (usually included in Unix-like systems or available via package managers).

## Setup Instructions
1. Clone the Repository:
```bash
git clone https://github.com/vcpopa/wsd-proxy
```

2. Navigate to the Project Root Directory:
```bash
cd <project_directory>
```

3. Extract **wsd-proxy-test.zip** and place the tar file  (**wsd-proxy-test.tar**) inside the **proxy-server** folder.

## Makefile Parameters Overview

### Parameters
- **PROXIES**: Controls the number of proxy containers to start. Default is 0, which will not start any proxies. Addresses will be written to *./data/addresses.txt*

- **BASE_PORT** : Specifies the base port number used for assigning ports to proxy containers. Default is 3001. Ports will be assigned sequentially based on the specified number of proxies e.g. **Proxy 1** will start on http://localhost:3001, **Proxy 2** on http://localhost:3002 and so on.

- **GENERATE_DATA**: Specifies the amount of test data to generate. Default is 0. If a number is specified, data will be written to *./data/input.txt*

- **RESPONSE_SEQUENCE**: Specifies the response sequence passed to Docker containers running proxies. Default is empty.

- **INPUT_FILE**: Path to the input file used by the main Python script. Default is *data/input.txt*.

- **ADDRESSES_FILE**: Path to the addresses output file. Default is *data/addresses.txt*.

- **OUTPUT_FILE**: Path to the output file generated by the main Python script. Default is *data/output.txt*.

### Example of Running make with Parameters

```bash
make PROXIES=10 BASE_PORT=3100 GENERATE_DATA=50000 RESPONSE_SEQUENCE="200;TEST;100"
```
This command will:

1. Set up a virtual python environment and install requirements from **requirements.txt**
2. Start 10 proxy containers.
3. Use port numbers starting from 3100 for proxy containers.
4. Start proxy containers with the specified response sequence.
5. Generate 50,000 data points.
6. Run the application using **data/inputs.txt, data/addresses.txt data/output.txt** as command line arguments.

### Example of Running make without Parameters
```bash
make
```

This command will:

1. Set up a virtual python environment and install requirements from **requirements.txt**
2. Run the application using **data/inputs.txt, data/addresses.txt data/output.txt** as command line arguments.

**Please ensure that you have started at least on proxy server and all the necessary inputs inside the 'data' folder before running make with no arguments**


## Running unit tests

```bash
make -f Makefile.test
```

## Approach diagram

![Alt Text][def]


[def]: img.png
